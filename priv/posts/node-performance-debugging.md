---
title: Node Debugging Tools
date: 2020-06-13 18:00
tags: javascript,article
---

[  ] Understand --prof
[  ] Understand --prof-basic-perf / only-functions
[  ] Understand native --native,.,..

# Node Debugging Tools (CPU Profiler)

How we can meansure the performance?

If you are a really software engineer, you already thinking about performance of your nodejs application.
And probably showup the feature flag: `--inspect` or `--inspect-brk` to enable CDT(Chrome Dev Tools) and meansure performance from there.
Well, that is nice, but sometimes is not enough. First of all, following the principles of others great engineer's,
you need to find out what part of your app are the bottleneck:

_Extenal_ or _Internal_.
In this article we are cover Internal improvements.

![external-x-internal](/images/node-performance-debugging/external-x-internal.png)

So, something you don't have an application to debug or finding the memory leak. Because of that I created
[`node-bottleneck`](https://github.com/RafaelGSS/node-bottleneck) is a simple repository containing versions of an web api
each version has a improvement in comparisson to another. Feel free to send a PR with an improvement.

All the data analyze is based on V1 of `node-bottleneck`.

## Meansure your code

So, we need to perform a way to meansure your code making a load test, at this point I recommend the following tools:

- HTTP Application
  - [Autocannon](https://github.com/mcollina/autocannon) - I'll use it.
  - [Apache Benchmark](https://httpd.apache.org/docs/2.4/programs/ab.html)
  - [JMeter](https://jmeter.apache.org/)

For event-driven application, I created a tool to only send messages to Kafka: (`kafka-load-consumer`)[https://github.com/RafaelGSS/kafka-load-consumer]
but you can use anything that can meansure the `start` and `end`.

For script only, I recommend `time` if you are on linux. (e.g `man time`).

// How to use autocannon here

## Meansure Performance

Has many ways/tools to meansure performance of your app:

- linux `perf` - I'll use it.
- 0x
- clinicjs
- simple profilling with `--prof`


// If use `perf` explain about JIT and why use the flag `--perf-basic-prof`
// flamegraph generated by perf

## Identify hot paths

// Here comment about trace-opt and trace-dopt
// Analyze flamegraph

## Alternative using CDT

// Explain usage of Load profiles

## Finding bottlenecks

// Show `node-bottlenecks` to make a playground with this tasks
// Explain how to analyze a flamegraph result
